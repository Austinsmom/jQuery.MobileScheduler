!function(e){e.fn.MobileScheduler=function(t){var a=e.extend({date:new Date,use24HourClock:!0,events:[],prevClass:"icon-arrow-left5",nextClass:"icon-arrow-right5",onEventClick:function(e,t){},onEventCreate:function(e,t){},labels:{allday:"all-day",newevent:"New",today:"Today",ends:"Ends",months:["January","February","March","April","May","June","July","August","September","October","November","December"],days:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]}},t),n=this,s=function(t){var i=new Date,d=function(){n.find(".jqms-month-view").on("webkitAnimationEnd animationend",function(){s("animated slideInRight")}).addClass("animated slideOutLeft"),11===a.date.getMonth()?(a.date.setMonth(0),a.date.setFullYear(a.date.getFullYear()+1)):a.date.setMonth(a.date.getMonth()+1)},l=function(){n.find(".jqms-month-view").on("webkitAnimationEnd animationend",function(){s("animated slideInLeft")}).addClass("animated slideOutRight"),0===a.date.getMonth()?(a.date.setMonth(11),a.date.setFullYear(a.date.getFullYear()-1)):a.date.setMonth(a.date.getMonth()-1)};n.empty(),n.addClass("jqms-calendar");var r=e('<div class="jqms-header"><div class="jqms-month"><a class="jqms-previous"><i class="'+a.prevClass+'"></i></a><a class="jqms-month-picker">'+a.labels.months[a.date.getMonth()]+", "+a.date.getFullYear()+'</a><a class="jqms-next"><i class="'+a.nextClass+'"></i></a></div><div class="jqms-days"></div><div class="jqms-picker"><div class="jqms-picker-header"><a class="jqms-picker-previous"><i class="'+a.prevClass+'"></i></a><span class="jqms-picker-title">'+a.date.getFullYear()+'</span><a class="jqms-picker-next"><i class="'+a.nextClass+'"></a></div><div class="jqms-months"></div></div></div>'),o=r.find(".jqms-days");_.each(a.labels.days,function(e){o.append('<div class="jqms-day">'+e+"</div>")}),r.find(".jqms-previous").click(function(e){e.preventDefault(),e.stopPropagation(),l()}),r.find(".jqms-next").click(function(e){e.preventDefault(),e.stopPropagation(),d()});var c=function(e,t){if(_.isNumber(e)&&_.isNumber(t)){var i="animated ",d="animated ";e<a.date.getFullYear()?(i+="slideInLeft",d+="slideOutRight"):e>a.date.getFullYear()?(i+="slideInRight",d+="slideOutLeft"):t<a.date.getMonth()?(i+="slideInLeft",d+="slideOutRight"):t>a.date.getMonth()&&(i+="slideInRight",d+="slideOutLeft"),a.date.setFullYear(e),a.date.setMonth(t),n.find(".jqms-month-view").on("webkitAnimationEnd animationend",function(){s(i)}).addClass(d)}};r.find(".jqms-month-picker").click(function(e){e.preventDefault(),e.stopPropagation(),n.find(".jqms-picker").css("display","flex").on("click",function(e){e.stopPropagation()}),n.on("click",function(){n.find(".jqms-picker").css("display","none"),n.off("click")})});var u=r.find(".jqms-picker");u.data("year",a.date.getFullYear()),_.each(a.labels.months,function(e,t){u.find(".jqms-months").append('<button class="jqms-month" data-month="'+t+'">'+e+"</button>")}),u.find(".jqms-month").click(function(){c(parseInt(u.data("year")),parseInt(e(this).data("month")))}),u.find(".jqms-picker-previous").click(function(e){var t=parseInt(u.data("year"))-1;u.data("year",t),u.find("span.jqms-picker-title").text(t)}),u.find(".jqms-picker-next").click(function(e){var t=parseInt(u.data("year"))+1;u.data("year",t),u.find("span.jqms-picker-title").text(t)}),n.append(r);for(var m=e('<div class="jqms-view-container"><div class="jqms-month-view-container"><div class="jqms-month-view '+(_.isString(t)?t:"")+'" tabindex="-1"></div></div><div class="jqms-list-view"><ul class="jqms-list-items"></ul></div></div>'),f=m.find(".jqms-month-view"),v=new Date(a.date.getFullYear(),a.date.getMonth(),1),g=new Date(a.date.getFullYear(),a.date.getMonth()+1,1),p=0;p<v.getDay();p++)f.append('<div class="jqms-day-cell"></div>');for(var h=_.filter(a.events,function(e){if(e&&e.start&&e.end&&a&&a.date){if(e.start>=v&&e.start<g)return!0;if(e.end>=v&&e.end<g)return!0;if(e.start<v&&e.end>g)return!0}return!1}),j=new Date(a.date.getFullYear(),a.date.getMonth()+1,0).getDate(),q=1;q<=j;q++){var w=e('<div class="jqms-day-cell"></div>');w.append("<span>"+q+"</span>"),w.data("day",q),w.click(function(){a.date.setDate(e(this).data("day")),s()}),i.getFullYear()===a.date.getFullYear()&&i.getMonth()===a.date.getMonth()&&i.getDate()===q&&w.addClass("jqms-today"),a.date.getDate()===q&&w.addClass("jqms-active");var M=new Date(a.date.getFullYear(),a.date.getMonth(),q),y=new Date(a.date.getFullYear(),a.date.getMonth(),q+1);_.filter(h,function(e){if(e&&e.start&&e.end){if(e.start>=M&&e.start<y)return!0;if(e.end>M&&e.end<y)return!0;if(e.start<M&&e.end>=y)return!0}return!1}).length>0&&w.append("<span>&#9679;</span>"),f.append(w)}j+p>35?f.addClass("jqms-long"):j+p===28&&f.addClass("jqms-short"),f.on("webkitAnimationEnd animationend",function(){f.removeClass("animated slideInRight slideInLeft")}),f.click(function(e){e.preventDefault(),e.stopPropagation()});var M=new Date(a.date.getFullYear(),a.date.getMonth(),a.date.getDate()),y=new Date(a.date.getFullYear(),a.date.getMonth(),a.date.getDate()+1),k=_.filter(h,function(e){if(e&&e.start&&e.end){if(e.start>=M&&e.start<y)return!0;if(e.end>M&&e.end<y)return!0;if(e.start<M&&e.end>=y)return!0}return!1}),b=m.find(".jqms-list-items"),M=new Date(a.date.getFullYear(),a.date.getMonth(),a.date.getDate()),y=new Date(a.date.getFullYear(),a.date.getMonth(),a.date.getDate()+1);_.each(_.sortBy(k,function(e){return e.start.getTime()}),function(t){var n,s;if(t.start.getTime()===M.getTime()&&t.end.getTime()===y.getTime())n=a.labels.allday,s="&nbsp;";else if(t.start>=M&&t.start<y)if(a.use24HourClock)n=(t.start.getHours()<10?"0":"")+t.start.getHours()+":"+(t.start.getMinutes()<10?"0":"")+t.start.getMinutes();else{var i=t.start.getHours()%12;0===i&&(i=12),n=(i<10?"0":"")+i+":"+(t.start.getMinutes()<10?"0":"")+t.start.getMinutes()+(t.start.getHours()>12?" PM":" AM")}else n=t.start<M&&t.end>=y?a.labels.allday:a.labels.ends;if(t.end>M&&t.end<y)if(a.use24HourClock)s=(t.end.getHours()<10?"0":"")+t.end.getHours()+":"+(t.end.getMinutes()<10?"0":"")+t.end.getMinutes();else{var d=t.end.getHours()%12;0===d&&(d=12),s=(d<10?"0":"")+d+":"+(t.end.getMinutes()<10?"0":"")+t.end.getMinutes()+(t.end.getHours()>12?" PM":" AM")}else s=t.end<M&&t.end>=y?a.labels.allday:"&nbsp;";var l=e("<li><div><span>"+n+"</span><span>"+(t.allday?"&nbsp;":s)+"</span></div><span>"+t.title+"</span></li>");l.data("event",JSON.stringify(t)),l.click(function(t){a.onEventClick(JSON.parse(e(this).data("event")),t)}),b.append(l)}),n.append(m);var D=e('<div class="jqms-footer"><a class="jqms-today">'+a.labels.today+'</a><a class="jqms-new-event">'+a.labels.newevent+"</a></div>");if(D.find(".jqms-today").click(function(){var t=new Date;a.date.setDate(t.getDate()),c(t.getFullYear(),t.getMonth()),e(".jqms-active").removeClass("jqms-active"),e(".jqms-today").addClass("jqms-active")}),_.isFunction(a.onEventCreate)?D.find(".jqms-new-event").click(function(e){a.onEventCreate(a.date,e)}):D.find(".jqms-new-event").hide(),n.append(D),window.IScroll){var C=!1,F=!1;new IScroll(n.find(".jqms-month-view-container")[0],{disableMouse:!0,disablePointer:!0,bindToWrapper:!0,scrollX:!0,probeType:3,eventPassthrough:!0}).on("scroll",function(t){this.x>.05*e(window).width()?C=!0:this.x<-.05*e(window).width()?F=!0:(C=!1,F=!1)}),n.find(".jqms-month-view").on("touchend",function(){F?d():C&&l()})}};return s(),this}}(jQuery);