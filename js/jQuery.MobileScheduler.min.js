!function(a){a.fn.MobileScheduler=function(b){var c=a.extend({date:new Date,use24HourClock:!0,events:[],prevClass:"icon-arrow-left5",nextClass:"icon-arrow-right5",onEventClick:function(a,b){},onEventCreate:function(a,b){},labels:{allday:"all-day",newevent:"New",today:"Today",months:["January","February","March","April","May","June","July","August","September","October","November","December"],days:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]}},b),d=this,e=function(b){var f=new Date,g=function(){d.find(".jqms-month-view").on("webkitAnimationEnd animationend",function(){e("animated slideInRight")}).addClass("animated slideOutLeft"),11===c.date.getMonth()?(c.date.setMonth(0),c.date.setFullYear(c.date.getFullYear()+1)):c.date.setMonth(c.date.getMonth()+1)},h=function(){d.find(".jqms-month-view").on("webkitAnimationEnd animationend",function(){e("animated slideInLeft")}).addClass("animated slideOutRight"),0===c.date.getMonth()?(c.date.setMonth(11),c.date.setFullYear(c.date.getFullYear()-1)):c.date.setMonth(c.date.getMonth()-1)};d.empty(),d.addClass("jqms-calendar");var i=a('<div class="jqms-header"><div class="jqms-month"><a class="jqms-previous"><i class="'+c.prevClass+'"></i></a><a class="jqms-month-picker">'+c.labels.months[c.date.getMonth()]+", "+c.date.getFullYear()+'</a><a class="jqms-next"><i class="'+c.nextClass+'"></i></a></div><div class="jqms-days"></div><div class="jqms-picker"><div class="jqms-picker-header"><a class="jqms-picker-previous"><i class="'+c.prevClass+'"></i></a><span class="jqms-picker-title">'+c.date.getFullYear()+'</span><a class="jqms-picker-next"><i class="'+c.nextClass+'"></a></div><div class="jqms-months"></div></div></div>'),j=i.find(".jqms-days");_.each(c.labels.days,function(a){j.append('<div class="jqms-day">'+a+"</div>")}),i.find(".jqms-previous").click(function(a){a.preventDefault(),a.stopPropagation(),h()}),i.find(".jqms-next").click(function(a){a.preventDefault(),a.stopPropagation(),g()});var k=function(a,b){if(_.isNumber(a)&&_.isNumber(b)){var f="animated ",g="animated ";a<c.date.getFullYear()?(f+="slideInLeft",g+="slideOutRight"):a>c.date.getFullYear()?(f+="slideInRight",g+="slideOutLeft"):b<c.date.getMonth()?(f+="slideInLeft",g+="slideOutRight"):b>c.date.getMonth()&&(f+="slideInRight",g+="slideOutLeft"),c.date.setFullYear(a),c.date.setMonth(b),d.find(".jqms-month-view").on("webkitAnimationEnd animationend",function(){e(f)}).addClass(g)}};i.find(".jqms-month-picker").click(function(a){a.preventDefault(),a.stopPropagation(),d.find(".jqms-picker").css("display","flex").on("click",function(a){a.stopPropagation()}),d.on("click",function(){d.find(".jqms-picker").css("display","none"),d.off("click")})});var l=i.find(".jqms-picker");l.data("year",c.date.getFullYear()),_.each(c.labels.months,function(a,b){l.find(".jqms-months").append('<button class="jqms-month" data-month="'+b+'">'+a+"</button>")}),l.find(".jqms-month").click(function(){k(parseInt(l.data("year")),parseInt(a(this).data("month")))}),l.find(".jqms-picker-previous").click(function(a){var b=parseInt(l.data("year"))-1;l.data("year",b),l.find("span.jqms-picker-title").text(b)}),l.find(".jqms-picker-next").click(function(a){var b=parseInt(l.data("year"))+1;l.data("year",b),l.find("span.jqms-picker-title").text(b)}),d.append(i);for(var m=a('<div class="jqms-view-container"><div class="jqms-month-view-container"><div class="jqms-month-view '+(_.isString(b)?b:"")+'" tabindex="-1"></div></div><div class="jqms-list-view"><ul class="jqms-list-items"></ul></div></div>'),n=m.find(".jqms-month-view"),o=new Date(c.date.getFullYear(),c.date.getMonth(),1),p=0;p<o.getDay();p++)n.append('<div class="jqms-day-cell"></div>');for(var q=_.filter(c.events,function(a){return!!(a&&a.start&&c&&c.date)&&(a.allday?a.start.getUTCFullYear()===c.date.getFullYear()&&a.start.getUTCMonth()===c.date.getMonth():a.start.getFullYear()===c.date.getFullYear()&&a.start.getMonth()===c.date.getMonth())}),r=new Date(c.date.getFullYear(),c.date.getMonth()+1,0).getDate(),s=1;s<=r;s++){var t=a('<div class="jqms-day-cell"></div>');t.append("<span>"+s+"</span>"),t.data("day",s),t.click(function(){c.date.setDate(a(this).data("day")),e()}),f.getFullYear()===c.date.getFullYear()&&f.getMonth()===c.date.getMonth()&&f.getDate()===s&&t.addClass("jqms-today"),c.date.getDate()===s&&t.addClass("jqms-active"),_.filter(q,function(a){return a&&a.start&&(!a.allday&&a.start.getDate()===s||a.allday&&a.start.getUTCDate()===s)}).length>0&&t.append("<span>&#9679;</span>"),n.append(t)}r+p>35?n.addClass("jqms-long"):r+p===28&&n.addClass("jqms-short"),n.on("webkitAnimationEnd animationend",function(){n.removeClass("animated slideInRight slideInLeft")}),n.click(function(a){a.preventDefault(),a.stopPropagation()});var u=_.filter(q,function(a){return a&&a.start&&(!a.allday&&a.start.getDate()===c.date.getDate()||a.allday&&a.start.getUTCDate()===c.date.getDate())}),v=m.find(".jqms-list-items");_.each(_.sortBy(u,function(a){return a.start.getTime()}),function(b){var d=c.labels.allday,e=c.labels.allday;if(!b.allday)if(c.use24HourClock)d=(b.start.getHours()<10?"0":"")+b.start.getHours()+":"+(b.start.getMinutes()<10?"0":"")+b.start.getMinutes(),e=(b.end.getHours()<10?"0":"")+b.end.getHours()+":"+(b.end.getMinutes()<10?"0":"")+b.end.getMinutes();else{var f=b.start.getHours()%12,g=b.end.getHours()%12;0===f&&(f=12),0===g&&(g=12),d=(f<10?"0":"")+f+":"+(b.start.getMinutes()<10?"0":"")+b.start.getMinutes()+(b.start.getHours()>12?" PM":" AM"),e=(g<10?"0":"")+g+":"+(b.end.getMinutes()<10?"0":"")+b.end.getMinutes()+(b.end.getHours()>12?" PM":" AM")}var h=a("<li><div><span>"+d+"</span><span>"+(b.allday?"&nbsp;":e)+"</span></div><span>"+b.title+"</span></li>");h.data("event",JSON.stringify(b)),h.click(function(b){c.onEventClick(JSON.parse(a(this).data("event")),b)}),v.append(h)}),d.append(m);var w=a('<div class="jqms-footer"><a class="jqms-today">'+c.labels.today+'</a><a class="jqms-new-event">'+c.labels.newevent+"</a></div>");if(w.find(".jqms-today").click(function(){var a=new Date;c.date.setDate(a.getDate()),k(a.getFullYear(),a.getMonth())}),_.isFunction(c.onEventCreate)?w.find(".jqms-new-event").click(function(a){c.onEventCreate(c.date,a)}):w.find(".jqms-new-event").hide(),d.append(w),window.IScroll){var x=new IScroll(d.find(".jqms-month-view-container")[0],{disableMouse:!0,disablePointer:!0,bindToWrapper:!0,scrollX:!0,probeType:3,eventPassthrough:!0}),y=!1,z=!1;x.on("scroll",function(b){this.x>.05*a(window).width()?y=!0:this.x<-(.05*a(window).width())?z=!0:(y=!1,z=!1)}),d.find(".jqms-month-view").on("touchend",function(){z?g():y&&h()})}};return e(),this}}(jQuery);